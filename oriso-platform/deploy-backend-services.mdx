---
title: "Deploy Backend Services"
description: "Deploy all backend microservices: TenantService, UserService, ConsultingTypeService, AgencyService, UploadService, and VideoService"
---

# Deploy Backend Services

Deploy all ORISO Platform backend microservices.

<Steps>
<Step title="Deploy All Backend Services">

Deploy all backend services using the deployment configuration.

```bash
cd ~/online-beratung/caritas-workspace/ORISO-Kubernetes

# Deploy backend services
kubectl apply -f deployments/04-backend-services.yaml

# Wait for services (may take 10-15 minutes for all to start)
kubectl wait --for=condition=ready pod -l tier=backend -n caritas --timeout=900s

# Check status
kubectl get pods -n caritas | grep -E "tenant|user|consulting|agency|upload|video"
```

<Check>
All services should show status `Running` and `1/1` ready:
- tenantservice-xxx
- userservice-xxx
- consultingtypeservice-xxx
- agencyservice-xxx
- uploadservice-xxx
- videoservice-xxx
</Check>

</Step>

<Step title="Verify Backend Services Health">

Check health endpoints for all backend services.

```bash
# Check TenantService
curl http://127.0.0.1:8081/actuator/health
# Expected: {"status":"UP"}

# Check UserService
curl http://127.0.0.1:8082/actuator/health
# Expected: {"status":"UP"}

# Check ConsultingTypeService
curl http://127.0.0.1:8083/actuator/health
# Expected: {"status":"UP"}

# Check AgencyService
curl http://127.0.0.1:8084/actuator/health
# Expected: {"status":"UP"}
```

<Warning>
If any service shows DOWN, check logs:
```bash
kubectl logs deployment/tenantservice -n caritas --tail=100
kubectl logs deployment/userservice -n caritas --tail=100
```
</Warning>

</Step>

<Step title="Verify secrets and environment variables">

Confirm database and Keycloak connection settings are present in deployments and secrets.

1) Inspect deployment env vars (example: TenantService)

```bash
kubectl get deployment tenantservice -n caritas -o yaml | grep -A3 -E "env:|name: (SPRING_DATASOURCE_URL|SPRING_DATASOURCE_USERNAME|SPRING_DATASOURCE_PASSWORD|KEYCLOAK_.*)"
```

2) List referenced secrets and check keys

```bash
# Find secrets referenced by envFrom/secretKeyRef
kubectl get deployment tenantservice -n caritas -o yaml | grep -E "secretName:|name:.*SECRET" -A1

# Example: inspect a secret
kubectl get secret tenantservice-db -n caritas -o yaml | grep -E "data:|stringData:|name:"
```

3) Validate values inside pod (sanity check)

```bash
POD=$(kubectl get pods -n caritas -l app=tenantservice -o jsonpath="{.items[0].metadata.name}")
kubectl exec -it -n caritas $POD -- env | grep -E "SPRING_DATASOURCE_|KEYCLOAK_"
```

<Warning>
If env vars are missing or secrets not found, update the deployment manifests to reference the correct secret names and keys. Ensure MariaDB/MongoDB hosts match your service names in `-n caritas`.
</Warning>

<Check>
All DB and Keycloak env vars should be present in the pod environment; referenced secrets should exist and contain expected keys.
</Check>

</Step>

<Step title="Verify database connectivity and migrations">

Confirm each service can reach its database and that migrations (Flyway/Liquibase) have applied.

1) Actuator DB health

```bash
for port in 8081 8082 8083 8084; do
  echo "Port $port DB health:";
  curl -s http://127.0.0.1:$port/actuator/health/db | jq . || true;
done
```

2) Check service logs for migration success

```bash
kubectl logs deployment/tenantservice -n caritas --tail=200 | grep -Ei "Flyway|Liquibase|schema|migration" || true
kubectl logs deployment/userservice -n caritas --tail=200 | grep -Ei "Flyway|Liquibase|schema|migration" || true
```

3) Troubleshooting

- If `health/db` is DOWN: verify DB host/user/password env vars in the deployment and that the DB services are reachable.
- If migrations failed: reâ€‘run pod and review SQL scripts under `ORISO-Database/mariadb/*`.

<Check>
All DB health checks should report `UP`, and logs should show migrations completed successfully.
</Check>

</Step>
</Steps>

## Next Steps

- [Deploy Frontend](/oriso-platform/deploy-frontend) - Deploy frontend and admin applications
- [Post-Deployment Configuration](/oriso-platform/post-deployment) - Verify complete deployment
