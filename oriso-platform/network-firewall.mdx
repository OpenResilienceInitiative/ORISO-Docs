---
title: "Network & Firewall Configuration"
description: "Configure network settings, install and configure UFW firewall, and set system limits for Kubernetes"
---

# Network & Firewall Configuration

Configure network settings, firewall rules, and system limits to prepare your server for ORISO Platform deployment.

<Steps>
<Step title="Check Network Configuration">

Verify network connectivity and configuration before proceeding.

<Tabs>
  <Tab title="Ubuntu/Debian">

```bash
ip addr show
ip route show
cat /etc/resolv.conf
ping -c 4 8.8.8.8
ping -c 4 google.com
```

  </Tab>
  <Tab title="macOS">

```bash
ifconfig | grep -E 'inet '
netstat -nr | grep default
scutil --dns | grep nameserver
ping -c 4 8.8.8.8
ping -c 4 google.com
```

  </Tab>
  <Tab title="Windows">

```powershell
Get-NetIPAddress -AddressFamily IPv4 | Where-Object {$_.IPAddress -ne '127.0.0.1'}
Get-NetRoute -DestinationPrefix 0.0.0.0/0
Get-DnsClientServerAddress
Test-Connection -ComputerName 8.8.8.8 -Count 4
Test-Connection -ComputerName google.com -Count 4
```

  </Tab>
</Tabs>

<Check>
Ensure you can ping external addresses and DNS resolution is working correctly.
</Check>

</Step>

<Step title="Configure Firewall">

Configure firewall rules for all required services.

<Warning>
**IMPORTANT**: Always allow SSH (port 22) first before enabling the firewall, or you may lock yourself out!
</Warning>

<Tabs>
  <Tab title="Ubuntu/Debian — UFW">

```bash
# Install UFW
sudo apt install -y ufw

# Set default policies
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Allow SSH (IMPORTANT - do this first!)
sudo ufw allow 22/tcp

# Allow required ports
sudo ufw allow 80/tcp    # HTTP (optional)
sudo ufw allow 443/tcp   # HTTPS (optional)
sudo ufw allow 8089/tcp  # Nginx Proxy
sudo ufw allow 9001/tcp  # Frontend
sudo ufw allow 9002/tcp  # Admin
sudo ufw allow 8080/tcp  # Keycloak
sudo ufw allow 8087/tcp  # Element.io
sudo ufw allow 8008/tcp  # Matrix Synapse (optional)
sudo ufw allow 9021/tcp  # Redis Commander (optional)
sudo ufw allow 9020/tcp  # Redis Exporter (optional)
sudo ufw allow 9100/tcp  # Health Dashboard (optional)
sudo ufw allow 3001/tcp  # SignOZ (optional)

# Enable UFW
sudo ufw enable
sudo ufw status verbose
```

  </Tab>
  <Tab title="macOS — pfctl">

```bash
# macOS firewall is typically managed via System Settings
# System Settings → Network → Firewall → Options

# Or via command line (advanced):
sudo pfctl -f /etc/pf.conf
# Edit /etc/pf.conf to add rules, then reload
```

<Info>
macOS firewall is usually sufficient for local development. For production, use a cloud provider's firewall or router.
</Info>

  </Tab>
  <Tab title="Windows — Windows Firewall">

```powershell
# Allow SSH (if OpenSSH Server is installed) - IMPORTANT: do this first!
New-NetFirewallRule -DisplayName "SSH" -Direction Inbound -LocalPort 22 -Protocol TCP -Action Allow

# Allow required ports
New-NetFirewallRule -DisplayName "HTTP" -Direction Inbound -LocalPort 80 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "HTTPS" -Direction Inbound -LocalPort 443 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Nginx Proxy" -Direction Inbound -LocalPort 8089 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Frontend" -Direction Inbound -LocalPort 9001 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Admin" -Direction Inbound -LocalPort 9002 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Keycloak" -Direction Inbound -LocalPort 8080 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Element" -Direction Inbound -LocalPort 8087 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Matrix Synapse" -Direction Inbound -LocalPort 8008 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Redis Commander" -Direction Inbound -LocalPort 9021 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Redis Exporter" -Direction Inbound -LocalPort 9020 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Health Dashboard" -Direction Inbound -LocalPort 9100 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "SignOZ" -Direction Inbound -LocalPort 3001 -Protocol TCP -Action Allow

# Verify
Get-NetFirewallRule | Where-Object {$_.DisplayName -like "*SSH*" -or $_.DisplayName -like "*HTTP*" -or $_.DisplayName -like "*Nginx*" -or $_.DisplayName -like "*Frontend*" -or $_.DisplayName -like "*Admin*" -or $_.DisplayName -like "*Keycloak*" -or $_.DisplayName -like "*Element*" -or $_.DisplayName -like "*Matrix*" -or $_.DisplayName -like "*Redis*" -or $_.DisplayName -like "*Health*" -or $_.DisplayName -like "*SignOZ*"}
```

<Info>
**Note**: HTTP (80) and HTTPS (443) are optional but recommended for Let's Encrypt certificate validation and HTTPS access. Matrix Synapse (8008), Redis Commander (9021), Redis Exporter (9020), Health Dashboard (9100), and SignOZ (3001) are optional services that can be deployed as needed.
</Info>

  </Tab>
</Tabs>

<Check>
Expected output should show all ports as `ALLOW IN` with status `active`. Verify SSH is listed first.
</Check>

</Step>

<Step title="Configure System Limits">

Increase system file and process limits required for Kubernetes operation.

<Tabs>
  <Tab title="Ubuntu/Debian">

```bash
# Increase file limits for Kubernetes
sudo tee -a /etc/security/limits.conf <<EOF
* soft nofile 65536
* hard nofile 65536
* soft nproc 32768
* hard nproc 32768
EOF

# Increase kernel limits
sudo tee -a /etc/sysctl.conf <<EOF
fs.file-max = 2097152
fs.inotify.max_user_watches = 524288
fs.inotify.max_user_instances = 512
vm.max_map_count = 262144
net.ipv4.ip_forward = 1
EOF

# Apply sysctl settings
sudo sysctl -p

# Verify
ulimit -n
```

  </Tab>
  <Tab title="macOS">

```bash
# macOS limits are typically sufficient for local development
# Check current limits
ulimit -n
launchctl limit maxfiles

# If needed, increase (requires restart):
# sudo launchctl limit maxfiles 65536 200000
```

  </Tab>
  <Tab title="Windows">

Windows handles file and process limits differently. For local development with Docker Desktop or Rancher Desktop, default limits are usually sufficient. For production, deploy on Ubuntu server where limits can be configured.

  </Tab>
</Tabs>

<Check>
The `ulimit -n` command should output `65536`.
</Check>

<Note>
You may need to log out and log back in for the limits.conf changes to take full effect.
</Note>

</Step>
</Steps>

## Firewall Port Summary

The following ports are configured to allow incoming connections:

| Port | Service | Required |
|------|---------|----------|
| `22` | SSH | ✅ Required |
| `80` | HTTP | Optional (for Let's Encrypt) |
| `443` | HTTPS | Optional |
| `8089` | Nginx Proxy | ✅ Required |
| `9001` | Frontend | ✅ Required |
| `9002` | Admin | ✅ Required |
| `8080` | Keycloak | ✅ Required |
| `8087` | Element.io | ✅ Required |
| `8008` | Matrix Synapse | Optional |
| `9021` | Redis Commander | Optional |
| `9020` | Redis Exporter | Optional |
| `9100` | Health Dashboard | Optional |
| `3001` | SignOZ | Optional |

## Troubleshooting

If you're locked out of SSH after enabling the firewall:

1. Access your server via console (not SSH)
2. Disable UFW: `sudo ufw disable`
3. Re-add SSH rule: `sudo ufw allow 22/tcp`
4. Re-enable UFW: `sudo ufw enable`

## Next Steps

- [Install Required Software](/oriso-platform/install-software) - Install Docker and Kubernetes
- [Clone ORISO Repositories](/oriso-platform/clone-repositories) - Transfer repositories to server

