---
title: "Deploy Nginx Proxy"
description: "Deploy Nginx ConfigMap and reverse proxy as the main entry point"
---

# Deploy Nginx Proxy

Deploy Nginx reverse proxy as the main entry point for ORISO Platform.

<Steps>
<Step title="Deploy Nginx ConfigMap and Proxy">

Deploy Nginx configuration and proxy service.

```bash
cd ~/online-beratung/caritas-workspace/ORISO-Kubernetes

# Deploy Nginx ConfigMap
kubectl apply -f configmaps/nginx-config.yaml

# Deploy Nginx proxy
kubectl apply -f deployments/08-nginx-proxy.yaml

# Wait for Nginx
kubectl wait --for=condition=ready pod -l app=cob-proxy -n caritas --timeout=180s

# Check status
kubectl get pods -n caritas | grep cob-proxy
```

<Check>
The cob-proxy pod should be running:
- cob-proxy-xxx    1/1     Running
</Check>

</Step>

<Step title="Verify Nginx Proxy">

Verify Nginx proxy is accessible and routing correctly.

```bash
# Check Nginx
curl -I http://127.0.0.1:8089
# Expected: HTTP/1.1 200 or redirects

# Check logs
kubectl logs deployment/cob-proxy -n caritas --tail=50

# Access in browser
SERVER_IP=$(hostname -I | awk '{print $1}')
echo "Main Entry Point: http://$SERVER_IP:8089"
```

<Check>
Nginx should respond with HTTP 200 or appropriate redirects.
</Check>

</Step>

<Step title="Expose Matrix well-known endpoints (recommended)">

Enable Matrix client/server discovery via Nginx so Element can auto-detect the homeserver.

1) Edit Nginx ConfigMap to add well-known locations

```bash
kubectl edit configmap oriso-nginx-config -n caritas
```

Add these locations under the appropriate server block for your domain (replace `chat.example.org` and upstream URLs accordingly):

```nginx
location = /.well-known/matrix/client {
  default_type application/json;
  add_header Access-Control-Allow-Origin *;
  return 200 '{
    "m.homeserver": { "base_url": "https://chat.example.org" }
  }';
}

location = /.well-known/matrix/server {
  default_type application/json;
  return 200 '{ "m.server": "chat.example.org:443" }';
}
```

2) Apply reload

```bash
kubectl rollout restart deployment/cob-proxy -n caritas
```

3) Verify well-known endpoints

```bash
curl -s https://chat.example.org/.well-known/matrix/client | jq .
curl -s https://chat.example.org/.well-known/matrix/server | jq .
```

<Check>
The JSON should return your public homeserver URL and server entry. Element should auto-fill the homeserver when you enter the domain.
</Check>

</Step>
</Steps>

## Next Steps

- [Deploy Monitoring](/oriso-platform/deploy-monitoring) - Deploy health dashboard and monitoring
- [Post-Deployment Configuration](/oriso-platform/post-deployment) - Verify complete deployment

